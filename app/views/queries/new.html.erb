<h1>New Query</h1>

<%= render 'form' %>


<h1> Your grants </h1>
<% @tables_accessible.each do |table| %>
	<%= link_to table[0], "select_star/#{table[0]}" %>
	<br>
<% end %>

	<div class = "row">
    <div class = "col-md-6 col-xs-6">
    
      <h3>Table_names</h3>
      <div class = "table-responsive">
      <table class = "table table-striped table-hover">
        <thead>
          <th>Table name</th>
          <th>Access Type</th>
        </thead>
        <tbody>
          <% @tables.each do |key,value| %>
          <tr>
            <!-- <td> <%= key %></td> -->
           <td> <%= link_to key, "select_star/#{key}" %></td>
            <td>  <% access = ''%>
                  <% if (value & 1) > 0 %>
                    <% access = "SELECT" %>
                  <% end %>  
                  <% if (value & 2) > 0%>
                    <% access = access + '| INSERT'%>
                  <%end%>
                  <% if (value & 4) >0%>
                    <% access = access + '| DELETE' %>
                  <%end%>
                  <% if (value & 8) >0%>
                    <% access = access + '| UPDATE'%>
                  <%end%>
                  <%= access + ", " + value.to_s%>
            </td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div> 
    </div>
    <div class = "col-md-6 col-xs-6">
      <h3> Databases </h3>
      <div class = "table table-striped table-hover" >
      <table class = "table table-striped table-hover">
        <thead>
          <th> ID </th>
          <th> Name </th>
        </thead>
        <tbody>
          <% @databases.each do |db| %>
            <tr>
              <td> <%= db.id %> </td>
              <td> <%= link_to db.name, "/set_database/#{db.id}" %> </td>
            </tr>
          <% end %>
        </tbody>
      </table>
      </div>
    </div>
  </div>


</table>